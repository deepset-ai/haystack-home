<div class="advent-content image-bg">
    <div class="container">
        {{ $adventPages := sort (.GetPage "/advent-of-haystack").Pages "Params.day" }}
        {{ $totalDoors := 10 }}
        {{ $openDoors := len $adventPages }}

        {{ with .Params.discuss }}
            <div class="discuss-link">
                {{ partial "arrow-button" (dict "context" . "type" "link" "text" "Discuss" "url" . "color" "green" "icon"
            "discuss")}}
            </div>
        {{ end }}

        <div class="advent-grid">
            {{ range (seq 1 $totalDoors) }}
                {{ $currentDay := . }}
                {{ $dayExists := false }}
                
                {{ range $adventPages }}
                    {{ if eq .Params.day $currentDay }}
                        {{ $dayExists = true }}
                        <div class="door">
                            <img src="/images/advent-door-open.png" alt="">
                            <a href="{{ .RelPermalink }}#challenge" class="door-content">
                                {{ .Params.door_text }}
                            </a>
                        </div>
                        {{ break }}
                    {{ end }}
                {{ end }}
                {{ if not $dayExists }}
                    <div class="door">
                        <img src="/images/advent-door.png" alt="">
                        <div class="door-number">
                            <span>{{ $currentDay }}</span>
                        </div>
                    </div>
                {{ end }}
            {{ end }}
        </div>
    </div>
</div>